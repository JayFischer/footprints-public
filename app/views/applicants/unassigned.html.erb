<div class="container unassigned">
  <h1 class="center">Unassigned Applicants</h1>
  <% if @applicants.present? %>
    <div class="row">
      <div class="column middle">
        <% @applicants.each do |app| %>
          <div class="card">
            <%= link_to app.name, applicant_path(app.id), :class => "applicant-name column one-third" %>
            <div class="column one-third applicant-details">
              <p><%= app.location %></p>
              <p>Applied <%= pluralize(@applicant_presenter.days_since_last_applied(app.applied_on), "day", "days") %> ago</p>
            </div>
            <span class="applicant-actions">
              <%= form_for :applicant_to_assign, url: specify_craftsman_path, method: :post do |f| %>
                <div class="top_section">
                  <label class="dropdown-label">Assign to:</label>
                  <%= f.text_field :chosen_crafter, list: "crafters-list", value: "Available Crafter", class: "textbox-dropdown"%>
                  <datalist id="crafters-list">
                    <%= options_for_select(@craftsmen.map { |crafter| [crafter['name'], crafter['name']] }.unshift(["Available Crafter"])) %>
                  </datalist>
                  <%= f.hidden_field(:id, :value => app.id) %>
                  <%= f.hidden_field(:source, :value => "unassigned") %>
                </div>
                <div class="bottom_section">
                  <%= f.submit "Submit", class: "button primary" %>
                  <%= link_to "Deny", {:controller => 'applicants', :action => 'deny_application', :id => app.id }, {:class => "button secondary", data: { confirm: "Are you sure you want to deny #{app.name}?" }} %>
                </div>
                <% end %>
            </span>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
